<div class="event-list-container">

  <!-- Header -->
  <div class="header">
    <h2>Events</h2>
    <button class="btn-create" routerLink="/events/new">
      + Create Event
    </button>
  </div>



  <!-- Loading -->
  @if (loading) {
    <div class="loading">
      <div class="spinner"></div>
      <p>Loading events...</p>
    </div>
  }

  <!-- Error -->
  @if (error) {
    <div class="error">
      <p>{{ error }}</p>
      <button class="btn-retry" (click)="loadEvents()">Try Again</button>
    </div>
  }

  <!-- Empty State -->
  @if (!loading && !error && events.length === 0) {
    <div class="empty">
      <p>No events yet</p>
      <button class="btn-create" routerLink="/events/new">
        Create First Event
      </button>
    </div>
  }

  <!-- Events Table -->
  @if (!loading && !error && events.length > 0) {
    <table class="events-table">
      <thead>
      <tr>
        <th>#</th>
        <th>Title</th>
        <th>Description</th>
        <th>Start Date</th>
        <th>Location</th>
        <th>Capacity</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tbody>
        @for (event of events; track event.id; let i = $index) {
          <tr>
            <td>{{ i + 1 }}</td>
            <td>
              <strong>{{ event.title }}</strong>
              @if (event.isVirtual) {
                <span class="badge virtual">Virtual</span>
              }
            </td>
            <td>{{ event.description | slice:0:50 }}...</td>
            <td>{{ event.startDate | date:'short' }}</td>
            <td>
              @if (event.location) {
                {{ event.location.city }}
              } @else {
                N/A
              }
            </td>
            <td>{{ event.capacity }}</td>
            <td>
              <div class="actions">
                <button
                  class="btn-view"
                  [routerLink]="['/events', event.id]">
                  View
                </button>
                <button
                  class="btn-edit"
                  [routerLink]="['/events', event.id, 'edit']">
                  Edit
                </button>
                <button
                  class="btn-delete"
                  (click)="deleteEvent(event.id)">
                  Delete
                </button>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  }



</div>
